<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AES加密/解密工具</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transform: rotate(30deg);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }
        
        .content {
            padding: 30px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1rem;
        }
        
        textarea, input, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }
        
        textarea:focus, input:focus, select:focus {
            border-color: #4776E6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(71, 118, 230, 0.2);
            transform: translateY(-2px);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .config-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .config-item {
            display: flex;
            flex-direction: column;
        }
        
        .key-container {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .key-item {
            flex: 1;
        }
        
        .btn-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        button {
            padding: 14px 28px;
            background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(142, 84, 233, 0.3);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 80%);
            transform: scale(0);
            transition: transform 0.6s;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(142, 84, 233, 0.4);
        }
        
        button:hover::after {
            transform: scale(1);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border: 2px dashed #e0e0e0;
            min-height: 100px;
            position: relative;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .result-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(71, 118, 230, 0.05) 0%, rgba(142, 84, 233, 0.05) 100%);
            z-index: 0;
        }
        
        .result-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #4776E6;
            font-size: 1.2rem;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .result-text {
            word-break: break-all;
            line-height: 1.8;
            font-family: monospace;
            font-size: 1.1rem;
            position: relative;
            min-height: 30px;
            background: rgba(255,255,255,0.7);
            padding: 10px;
            border-radius: 5px;
        }
        
        .info-box {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin-top: 30px;
            border-radius: 0 8px 8px 0;
            position: relative;
            overflow: hidden;
        }
        
        .info-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, rgba(33, 150, 243, 0.05) 0%, transparent 100%);
        }
        
        .info-title {
            font-weight: 700;
            margin-bottom: 12px;
            color: #0d47a1;
            font-size: 1.3rem;
            position: relative;
        }
        
        .info-content {
            font-size: 1rem;
            position: relative;
        }
        
        .info-content p {
            margin-bottom: 10px;
        }
        
        .key-length-info {
            display: inline-block;
            background: #2196f3;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin: 0 5px;
        }
        
        .copy-btn {
            background: #4776E6;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .copy-btn:hover {
            background: #3a65c9;
        }
        
        .key-warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin-top: 10px;
            border-radius: 0 4px 4px 0;
            font-size: 0.9rem;
            color: #856404;
        }
        
        .key-status {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 0.9rem;
        }
        
        .key-status i {
            font-size: 1.2rem;
        }
        
        .key-good {
            color: #28a745;
        }
        
        .key-weak {
            color: #ffc107;
        }
        
        .key-bad {
            color: #dc3545;
        }
        
        #temp-copy-input {
            position: absolute;
            left: -9999px;
            opacity: 0;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #4CAF50;
            color: white;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transform: translateX(150%);
            transition: transform 0.3s ease-in-out;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .tool-tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            transition: all 0.3s;
            color: #555;
        }
        
        .tab.active {
            background: linear-gradient(90deg, rgba(71, 118, 230, 0.2) 0%, rgba(142, 84, 233, 0.2) 100%);
            color: #4776E6;
            border-bottom: 3px solid #4776E6;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .key-container, .config-container {
                flex-direction: column;
                grid-template-columns: 1fr;
            }
            
            .btn-container {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .result-container {
                padding: 15px;
            }
            
            .result-text {
                font-size: 0.9rem;
            }
            
            .copy-btn {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>AES加密/解密工具</h1>
            <p class="subtitle">灵活强大的AES加密解密工具 - 支持任意长度密钥</p>
        </header>
        
        <div class="content">
            <div class="tool-tabs">
                <div class="tab active" data-tab="encrypt">加密</div>
                <div class="tab" data-tab="decrypt">解密</div>
            </div>
            
            <!-- 加密内容 -->
            <div class="tab-content active" id="encryptTab">
                <div class="input-group">
                    <label for="plaintext">输入要加密的文本：</label>
                    <textarea id="plaintext" placeholder="在此输入需要加密的文本..."></textarea>
                </div>
                
                <div class="config-container">
                    <div class="config-item">
                        <label for="keyLength">密钥长度：</label>
                        <select id="keyLength">
                            <option value="128">128位</option>
                            <option value="192">192位</option>
                            <option value="256" selected>256位</option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label for="mode">加密模式：</label>
                        <select id="mode">
                            <option value="CBC" selected>CBC (推荐)</option>
                            <option value="ECB">ECB</option>
                            <option value="CFB">CFB</option>
                            <option value="OFB">OFB</option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label for="padding">填充方案：</label>
                        <select id="padding">
                            <option value="Pkcs7" selected>PKCS7 (推荐)</option>
                            <option value="Iso97971">ISO9797-1</option>
                            <option value="AnsiX923">ANSI X.923</option>
                            <option value="ZeroPadding">ZeroPadding</option>
                        </select>
                    </div>
                </div>
                
                <div class="key-container">
                    <div class="key-item">
                        <label for="key">加密密钥：</label>
                        <input type="text" id="key" placeholder="输入任意长度的加密密钥" value="">
                        <div class="key-status">
                            <i id="keyStrengthIcon" class="fas fa-exclamation-triangle key-weak"></i>
                            <span id="keyStrengthText">密钥强度：中等</span>
                        </div>
                    </div>
                    
                    <div class="key-item">
                        <label for="iv">初始化向量 (IV)：</label>
                        <input type="text" id="iv" placeholder="输入初始化向量 (16字符为佳)" value="1234567890123456">
                    </div>
                </div>
                
                <div class="btn-container">
                    <button id="encryptBtn">
                        <i class="fas fa-lock"></i> 加密文本
                    </button>
                    <button id="generateKeyBtn">
                        <i class="fas fa-key"></i> 生成密钥
                    </button>
                    <button id="clearAllBtn">
                        <i class="fas fa-trash"></i> 清除所有
                    </button>
                </div>
                
                <div class="result-container">
                    <div class="result-title">
                        <span>加密结果：</span>
                        <button class="copy-btn" id="copyEncryptResultBtn">
                            <i class="fas fa-copy"></i> 复制结果
                        </button>
                    </div>
                    <div id="encryptResult" class="result-text">加密结果将显示在这里...</div>
                </div>
            </div>
            
            <!-- 解密内容 -->
            <div class="tab-content" id="decryptTab">
                <div class="input-group">
                    <label for="ciphertext">输入要解密的文本（Base64格式）：</label>
                    <textarea id="ciphertext" placeholder="在此输入需要解密的文本（Base64格式）..."></textarea>
                </div>
                
                <div class="config-container">
                    <div class="config-item">
                        <label for="decryptKeyLength">密钥长度：</label>
                        <select id="decryptKeyLength">
                            <option value="128">128位</option>
                            <option value="192">192位</option>
                            <option value="256" selected>256位</option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label for="decryptMode">加密模式：</label>
                        <select id="decryptMode">
                            <option value="CBC" selected>CBC (推荐)</option>
                            <option value="ECB">ECB</option>
                            <option value="CFB">CFB</option>
                            <option value="OFB">OFB</option>
                        </select>
                    </div>
                    
                    <div class="config-item">
                        <label for="decryptPadding">填充方案：</label>
                        <select id="decryptPadding">
                            <option value="Pkcs7" selected>PKCS7 (推荐)</option>
                            <option value="Iso97971">ISO9797-1</option>
                            <option value="AnsiX923">ANSI X.923</option>
                            <option value="ZeroPadding">ZeroPadding</option>
                        </select>
                    </div>
                </div>
                
                <div class="key-container">
                    <div class="key-item">
                        <label for="decryptKey">解密密钥：</label>
                        <input type="text" id="decryptKey" placeholder="输入解密密钥（与加密使用相同密钥）" value="">
                    </div>
                    
                    <div class="key-item">
                        <label for="decryptIv">初始化向量 (IV)：</label>
                        <input type="text" id="decryptIv" placeholder="输入初始化向量（与加密使用相同IV）" value="1234567890123456">
                    </div>
                </div>
                
                <div class="btn-container">
                    <button id="decryptBtn">
                        <i class="fas fa-lock-open"></i> 解密文本
                    </button>
                    <button id="clearDecryptBtn">
                        <i class="fas fa-trash"></i> 清除内容
                    </button>
                </div>
                
                <div class="result-container">
                    <div class="result-title">
                        <span>解密结果：</span>
                        <button class="copy-btn" id="copyDecryptResultBtn">
                            <i class="fas fa-copy"></i> 复制结果
                        </button>
                    </div>
                    <div id="decryptResult" class="result-text">解密结果将显示在这里...</div>
                </div>
            </div>
            
            <div class="info-box">
                <div class="info-title">关于AES加密/解密</div>
                <div class="info-content">
                    <p>AES (高级加密标准) 是一种广泛使用的对称加密算法，被美国政府采用为加密标准。</p>
                    <p>• 支持密钥长度：<span class="key-length-info">128位</span>、<span class="key-length-info">192位</span>、<span class="key-length-info">256位</span></p>
                    <p>• 加密模式：CBC、ECB、CFB、OFB（推荐使用CBC模式）</p>
                    <p>• 填充方案：PKCS7、ISO9797-1、ANSI X.923、ZeroPadding（推荐PKCS7）</p>
                    <p>• IV（初始化向量）应为16字符（CBC模式推荐使用）</p>
                    <p>• 密钥可以是任意长度，但建议使用16、24或32字符以获得最佳安全性</p>
                    <div class="key-warning">
                        <strong>重要提示：</strong> 加密和解密必须使用相同的密钥、IV、模式、填充方案和密钥长度！
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 用于兼容移动端复制的隐藏输入框 -->
    <input type="text" id="temp-copy-input" value="">
    
    <!-- 通知提示 -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">已复制到剪贴板！</span>
    </div>

    <script>
        // 密钥强度检测函数
        function checkKeyStrength(key) {
            if (!key) return { strength: 0, text: "无密钥", icon: "fa-times-circle", class: "key-bad" };
            
            let strength = 0;
            
            // 长度评分
            if (key.length >= 32) strength += 3;
            else if (key.length >= 24) strength += 2;
            else if (key.length >= 16) strength += 1;
            else if (key.length >= 8) strength += 0.5;
            
            // 复杂度评分
            if (/[A-Z]/.test(key)) strength += 1; // 包含大写字母
            if (/[a-z]/.test(key)) strength += 1; // 包含小写字母
            if (/[0-9]/.test(key)) strength += 1; // 包含数字
            if (/[^A-Za-z0-9]/.test(key)) strength += 2; // 包含特殊字符
            
            // 根据分数确定强度级别
            if (strength >= 6) {
                return { strength: 3, text: "密钥强度：非常强", icon: "fa-shield-alt", class: "key-good" };
            } else if (strength >= 4) {
                return { strength: 2, text: "密钥强度：强", icon: "fa-check-circle", class: "key-good" };
            } else if (strength >= 2) {
                return { strength: 1, text: "密钥强度：中等", icon: "fa-exclamation-triangle", class: "key-weak" };
            } else {
                return { strength: 0, text: "密钥强度：弱", icon: "fa-exclamation-circle", class: "key-bad" };
            }
        }
        
        // 更新密钥强度显示
        function updateKeyStrength() {
            const key = document.getElementById('key').value;
            const strengthInfo = checkKeyStrength(key);
            
            const icon = document.getElementById('keyStrengthIcon');
            const text = document.getElementById('keyStrengthText');
            
            icon.className = `fas ${strengthInfo.icon} ${strengthInfo.class}`;
            text.textContent = strengthInfo.text;
            text.className = strengthInfo.class;
        }
        
        // 生成随机密钥
        function generateRandomKey() {
            const keyLength = parseInt(document.getElementById('keyLength').value) / 8;
            const charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";
            let key = "";
            
            for (let i = 0; i < keyLength; i++) {
                key += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            
            document.getElementById('key').value = key;
            updateKeyStrength();
        }
        
        // 加密函数
        function encryptText() {
            const plaintext = document.getElementById('plaintext').value;
            const key = document.getElementById('key').value;
            const iv = document.getElementById('iv').value;
            const keyLength = parseInt(document.getElementById('keyLength').value);
            const mode = document.getElementById('mode').value;
            const padding = document.getElementById('padding').value;
            
            if (!plaintext) {
                showNotification("请输入要加密的文本！", "error");
                return;
            }
            
            if (!key) {
                showNotification("请输入加密密钥！", "error");
                return;
            }
            
            try {
                // 准备加密配置
                const config = {
                    mode: CryptoJS.mode[mode],
                    padding: CryptoJS.pad[padding]
                };
                
                // 对于需要IV的模式，添加IV
                if (mode !== 'ECB') {
                    if (!iv) {
                        showNotification("此模式需要初始化向量(IV)！", "error");
                        return;
                    }
                    config.iv = CryptoJS.enc.Utf8.parse(iv);
                }
                
                // 使用CryptoJS进行AES加密
                const encrypted = CryptoJS.AES.encrypt(plaintext, key, config);
                
                // 将加密结果转换为Base64字符串
                const encryptedText = encrypted.toString();
                
                // 显示加密结果
                document.getElementById('encryptResult').innerHTML = encryptedText;
                showNotification("加密成功！");
            } catch (error) {
                console.error('加密错误:', error);
                showNotification('加密过程中发生错误：' + error.message, "error");
            }
        }
        
        // 解密函数
        function decryptText() {
            const ciphertext = document.getElementById('ciphertext').value;
            const key = document.getElementById('decryptKey').value;
            const iv = document.getElementById('decryptIv').value;
            const keyLength = parseInt(document.getElementById('decryptKeyLength').value);
            const mode = document.getElementById('decryptMode').value;
            const padding = document.getElementById('decryptPadding').value;
            
            if (!ciphertext) {
                showNotification("请输入要解密的文本！", "error");
                return;
            }
            
            if (!key) {
                showNotification("请输入解密密钥！", "error");
                return;
            }
            
            try {
                // 准备解密配置
                const config = {
                    mode: CryptoJS.mode[mode],
                    padding: CryptoJS.pad[padding]
                };
                
                // 对于需要IV的模式，添加IV
                if (mode !== 'ECB') {
                    if (!iv) {
                        showNotification("此模式需要初始化向量(IV)！", "error");
                        return;
                    }
                    config.iv = CryptoJS.enc.Utf8.parse(iv);
                }
                
                // 使用CryptoJS进行AES解密
                const decryptedBytes = CryptoJS.AES.decrypt(ciphertext, key, config);
                
                // 将解密结果转换为UTF8字符串
                const decryptedText = decryptedBytes.toString(CryptoJS.enc.Utf8);
                
                if (!decryptedText) {
                    showNotification("解密失败，请检查密钥和参数！", "error");
                    document.getElementById('decryptResult').innerHTML = "解密失败：请检查密钥和参数是否正确";
                } else {
                    // 显示解密结果
                    document.getElementById('decryptResult').innerHTML = decryptedText;
                    showNotification("解密成功！");
                }
            } catch (error) {
                console.error('解密错误:', error);
                showNotification('解密过程中发生错误：' + error.message, "error");
                document.getElementById('decryptResult').innerHTML = "解密错误：" + error.message;
            }
        }
        
        // 显示通知
        function showNotification(message, type = "success") {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            
            // 根据类型设置不同颜色
            if (type === "success") {
                notification.style.background = "#4CAF50";
            } else {
                notification.style.background = "#f44336";
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // 兼容移动设备的复制功能
        function copyToClipboard(text) {
            const tempInput = document.getElementById('temp-copy-input');
            tempInput.value = text;
            tempInput.select();
            tempInput.setSelectionRange(0, 99999); // 对于移动设备
            
            try {
                // 尝试现代剪贴板API
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text).then(() => {
                        showNotification("已复制到剪贴板！");
                    }).catch(err => {
                        // 如果现代API失败，使用旧方法
                        document.execCommand('copy');
                        showNotification("已复制到剪贴板！");
                    });
                } else {
                    // 使用旧方法
                    document.execCommand('copy');
                    showNotification("已复制到剪贴板！");
                }
            } catch (err) {
                console.error('复制失败:', err);
                showNotification("复制失败，请手动选择并复制！", "error");
            }
        }
        
        // 初始化页面
        function initPage() {
            // 事件监听器 - 加密部分
            document.getElementById('encryptBtn').addEventListener('click', encryptText);
            document.getElementById('generateKeyBtn').addEventListener('click', generateRandomKey);
            document.getElementById('clearAllBtn').addEventListener('click', function() {
                document.getElementById('plaintext').value = '';
                document.getElementById('key').value = '';
                document.getElementById('iv').value = '';
                document.getElementById('encryptResult').innerHTML = '加密结果将显示在这里...';
                document.getElementById('ciphertext').value = '';
                document.getElementById('decryptKey').value = '';
                document.getElementById('decryptIv').value = '';
                document.getElementById('decryptResult').innerHTML = '解密结果将显示在这里...';
                updateKeyStrength();
            });
            document.getElementById('copyEncryptResultBtn').addEventListener('click', function() {
                const result = document.getElementById('encryptResult').textContent;
                if (result && result !== '加密结果将显示在这里...') {
                    copyToClipboard(result);
                }
            });
            
            // 事件监听器 - 解密部分
            document.getElementById('decryptBtn').addEventListener('click', decryptText);
            document.getElementById('clearDecryptBtn').addEventListener('click', function() {
                document.getElementById('ciphertext').value = '';
                document.getElementById('decryptKey').value = '';
                document.getElementById('decryptIv').value = '';
                document.getElementById('decryptResult').innerHTML = '解密结果将显示在这里...';
            });
            document.getElementById('copyDecryptResultBtn').addEventListener('click', function() {
                const result = document.getElementById('decryptResult').textContent;
                if (result && result !== '解密结果将显示在这里...') {
                    copyToClipboard(result);
                }
            });
            
            // 密钥强度更新
            document.getElementById('key').addEventListener('input', updateKeyStrength);
            
            // 根据选择的模式更新IV输入提示
            document.getElementById('mode').addEventListener('change', function() {
                const mode = this.value;
                const ivInput = document.getElementById('iv');
                
                if (mode === 'ECB') {
                    ivInput.placeholder = 'ECB模式不需要IV';
                } else {
                    ivInput.placeholder = '输入初始化向量 (16字符为佳)';
                }
            });
            
            document.getElementById('decryptMode').addEventListener('change', function() {
                const mode = this.value;
                const ivInput = document.getElementById('decryptIv');
                
                if (mode === 'ECB') {
                    ivInput.placeholder = 'ECB模式不需要IV';
                } else {
                    ivInput.placeholder = '输入初始化向量 (16字符为佳)';
                }
            });
            
            // 标签页切换
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新标签状态
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 更新内容显示
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                });
            });
            
            // 初始化密钥强度显示
            updateKeyStrength();
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>